{
  "info": {
    "name": "Scuola Danza Flutter API",
    "description": "Complete API collection for Flutter integration testing\n\n## üì± Flutter API System - Complete Testing Collection\n\n### üîê Authentication\nAll endpoints (except login/register) require Bearer token authentication.\n\n### üè† Base URLs\n- **Development**: `{{base_url}}` = `http://localhost:8089/api/mobile/v1`\n- **Production**: Update base_url variable accordingly\n\n### üß™ Test Accounts\n- **Admin**: contatti+admin@centrodanzaroma.it / password\n- **Student**: Create via register endpoint or use seeded data\n\n### üìã Usage\n1. Run \"Auth - Login\" first to get token\n2. Token is automatically saved to {{auth_token}} variable\n3. All other requests use this token automatically\n4. Test endpoints in logical order: Auth ‚Üí Dashboard ‚Üí CRUD operations\n\n### üîí Security\n- Rate limited: 120 requests/minute\n- Multi-tenant: Only see data from your school\n- Role-based access: Admin vs Student permissions",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "12345678"
  },
  "item": [
    {
      "name": "üîê Authentication",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Save auth token for future requests",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.token) {",
                  "        pm.collectionVariables.set('auth_token', response.data.token);",
                  "        pm.collectionVariables.set('user_id', response.data.user.id);",
                  "        pm.collectionVariables.set('user_role', response.data.user.role);",
                  "        pm.collectionVariables.set('school_id', response.data.user.school ? response.data.user.school.id : null);",
                  "        console.log('‚úÖ Login successful - Token saved');",
                  "    }",
                  "}",
                  "",
                  "pm.test('Login successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "    pm.expect(pm.response.json().success).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"contatti+admin@centrodanzaroma.it\",\n    \"password\": \"password\",\n    \"device_name\": \"Postman Testing\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "Register Student",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Mario Rossi\",\n    \"email\": \"mario.rossi@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\",\n    \"first_name\": \"Mario\",\n    \"last_name\": \"Rossi\",\n    \"phone\": \"+39 123 456 7890\",\n    \"school_id\": 2\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "me"
              ]
            }
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Mario Rossi Updated\",\n    \"first_name\": \"Mario\",\n    \"last_name\": \"Rossi\",\n    \"phone\": \"+39 987 654 3210\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/profile",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "profile"
              ]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "logout"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üìä Dashboard & Analytics",
      "item": [
        {
          "name": "Dashboard Quick Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/dashboard-quick",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "dashboard-quick"
              ]
            }
          }
        },
        {
          "name": "Analytics Dashboard",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/dashboard?period=month",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "analytics",
                "dashboard"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "month",
                  "description": "day, week, month, quarter, year"
                }
              ]
            }
          }
        },
        {
          "name": "Revenue Analytics (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/revenue",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "analytics",
                "revenue"
              ]
            }
          }
        },
        {
          "name": "Attendance Analytics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/analytics/attendance",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "analytics",
                "attendance"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üìö Courses Management",
      "item": [
        {
          "name": "Get Available Courses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/student/courses?page=1&per_page=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "student",
                "courses"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "per_page",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get Course Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/student/courses/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "student",
                "courses",
                "1"
              ]
            }
          }
        },
        {
          "name": "Get My Enrolled Courses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/student/courses/enrolled/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "student",
                "courses",
                "enrolled",
                "me"
              ]
            }
          }
        },
        {
          "name": "Enroll in Course",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"course_id\": 1,\n    \"enrollment_date\": \"2024-02-01\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/student/enrollments",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "student",
                "enrollments"
              ]
            }
          }
        },
        {
          "name": "Cancel Enrollment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"reason\": \"Schedule conflict\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/student/enrollments/1/cancel",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "student",
                "enrollments",
                "1",
                "cancel"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üéâ Events Management",
      "item": [
        {
          "name": "Get Available Events",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/events?page=1&search=danza",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "events"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "search",
                  "value": "danza"
                }
              ]
            }
          }
        },
        {
          "name": "Get Event Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/events/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "events",
                "1"
              ]
            }
          }
        },
        {
          "name": "Register for Event",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"notes\": \"Looking forward to this event!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/events/1/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "events",
                "1",
                "register"
              ]
            }
          }
        },
        {
          "name": "Get My Events",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/my-events?type=upcoming",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "my-events"
              ],
              "query": [
                {
                  "key": "type",
                  "value": "upcoming",
                  "description": "upcoming, past"
                }
              ]
            }
          }
        },
        {
          "name": "Cancel Event Registration",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/events/1/cancel",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "events",
                "1",
                "cancel"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üìä Attendance Tracking",
      "item": [
        {
          "name": "Get My Attendance History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/attendance/my-attendance?status=present",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "attendance",
                "my-attendance"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "present",
                  "description": "present, absent, late"
                }
              ]
            }
          }
        },
        {
          "name": "Get Attendance Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/attendance/my-stats",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "attendance",
                "my-stats"
              ]
            }
          }
        },
        {
          "name": "Get Upcoming Sessions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/attendance/upcoming-sessions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "attendance",
                "upcoming-sessions"
              ]
            }
          }
        },
        {
          "name": "Manual Check-in",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": \"course\",\n    \"session_id\": 1,\n    \"session_date\": \"2024-01-15\",\n    \"notes\": \"On time attendance\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/check-in",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "attendance",
                "check-in"
              ]
            }
          }
        },
        {
          "name": "Generate QR Code",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": \"course\",\n    \"session_id\": 1,\n    \"session_date\": \"2024-01-15\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/attendance/qr-code",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "attendance",
                "qr-code"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üßë‚Äçüíº Staff Management (Admin)",
      "item": [
        {
          "name": "Get Staff List",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/staff?search=mario&active=1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "staff"
              ],
              "query": [
                {
                  "key": "search",
                  "value": "mario"
                },
                {
                  "key": "active",
                  "value": "1"
                }
              ]
            }
          }
        },
        {
          "name": "Create Staff Member",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Elena Bianchi\",\n    \"email\": \"elena.bianchi@example.com\",\n    \"password\": \"password123\",\n    \"first_name\": \"Elena\",\n    \"last_name\": \"Bianchi\",\n    \"phone\": \"+39 111 222 3333\",\n    \"roles\": [\"Instructor\", \"Choreographer\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/staff",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "staff"
              ]
            }
          }
        },
        {
          "name": "Get Staff Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/staff/3",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "staff",
                "3"
              ]
            }
          }
        },
        {
          "name": "Update Staff Member",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Elena Bianchi Updated\",\n    \"phone\": \"+39 999 888 7777\",\n    \"roles\": [\"Senior Instructor\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/staff/3",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "staff",
                "3"
              ]
            }
          }
        },
        {
          "name": "Get Staff Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/staff/statistics",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "staff",
                "statistics"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üìÑ Documents & Media",
      "item": [
        {
          "name": "Get My Documents",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/documents?category=medical",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "documents"
              ],
              "query": [
                {
                  "key": "category",
                  "value": "medical",
                  "description": "general, medical, contract, identification, other"
                }
              ]
            }
          }
        },
        {
          "name": "Upload Document",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "title",
                  "value": "Certificato Medico",
                  "type": "text"
                },
                {
                  "key": "category",
                  "value": "medical",
                  "type": "text"
                },
                {
                  "key": "description",
                  "value": "Certificato medico per attivit√† sportive 2024",
                  "type": "text"
                },
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/documents",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "documents"
              ]
            }
          }
        },
        {
          "name": "Get Media Gallery",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/media",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "media"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "üîî Notifications",
      "item": [
        {
          "name": "Get Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/notifications",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "notifications"
              ]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-set base URL if not set",
          "if (!pm.collectionVariables.get('base_url')) {",
          "    pm.collectionVariables.set('base_url', 'http://localhost:8089/api/mobile/v1');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global response validation",
          "pm.test('Response has success field', function () {",
          "    const response = pm.response.json();",
          "    pm.expect(response).to.have.property('success');",
          "});",
          "",
          "pm.test('Response has data or appropriate error', function () {",
          "    const response = pm.response.json();",
          "    if (response.success) {",
          "        pm.expect(response).to.have.property('data');",
          "    } else {",
          "        pm.expect(response).to.have.property('message');",
          "    }",
          "});",
          "",
          "pm.test('Response time is acceptable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(3000);",
          "});"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8089/api/mobile/v1",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_role",
      "value": "",
      "type": "string"
    },
    {
      "key": "school_id",
      "value": "",
      "type": "string"
    }
  ]
}