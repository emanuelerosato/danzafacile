<x-app-layout>
    <x-slot name="header">
        <div class="flex items-center justify-between">
            <div>
                <h2 class="font-semibold text-xl text-gray-800 leading-tight">
                    Dettagli Corso
                </h2>
                <p class="text-sm text-gray-600 mt-1">
                    Gestione dettagli della tua scuola
                </p>
            </div>
        </div>
    </x-slot>

    <x-slot name="breadcrumb">
        <li class="flex items-center">
            <a href="{{ route('admin.dashboard') }}" class="text-gray-500 hover:text-gray-700">Dashboard</a>
            <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </li>
        <li class="text-gray-900 font-medium">Dettagli</li>
    </x-slot>


        <div class="flex items-center justify-between">
            <div>
                <h2 class="font-semibold text-xl text-gray-800 leading-tight">
                    Dettagli Corso
                </h2>
                <p class="text-sm text-gray-600 mt-1">
                    Informazioni complete sul corso
                </p>
            </div>
            <div class="flex items-center space-x-3">
                <a href="{{ route('admin.courses.edit', $course ?? 1) }}" 
                   class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                    Modifica
                </a>
                <button @click="$dispatch('open-modal', 'duplicate-course')" 
                        class="inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                    </svg>
                    Duplica
                </a>
            </div>
        </div>

    <x-slot name="breadcrumb">
        <li class="flex items-center">
            <a href="{{ route('dashboard') }}" class="text-gray-500 hover:text-gray-700">Dashboard</a>
            <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </li>
        <li class="flex items-center">
            <a href="{{ route('admin.courses.index') }}" class="text-gray-500 hover:text-gray-700">Corsi</a>
            <svg class="w-4 h-4 mx-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </li>
        <li class="text-gray-900 font-medium">Danza Classica Intermedio</li>

    <div class="space-y-6">
        <!-- Course Header Card -->
        <div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 overflow-hidden">
            <div class="bg-gradient-to-r from-rose-500 to-purple-600 p-6">
                <div class="flex items-center space-x-4">
                    <div class="w-20 h-20 bg-white/20 rounded-xl flex items-center justify-center text-white font-bold text-2xl">
                        DC
                    </div>
                    <div class="flex-1 text-white">
                        <h1 class="text-2xl font-bold">Danza Classica Intermedio</h1>
                        <p class="text-rose-100 mt-1">Corso per allievi con esperienza di base • Prof.ssa Martina Rossi</p>
                        <div class="flex items-center mt-2">
                            <span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full">
                                Attivo
                            </span>
                            <span class="ml-3 text-rose-100 text-sm">
                                Codice: CLA-INT-001 • Inizio: 15/09/2024
                            </span>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold">28/30</div>
                        <p class="text-rose-100 text-sm">studenti iscritti</p>
                        <div class="w-24 bg-white/20 rounded-full h-2 mt-2">
                            <div class="bg-white h-2 rounded-full" style="width: 93%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
            <x-stats-card 
                title="Studenti Iscritti"
                :value="28"
                icon="users"
                color="blue"
                subtitle="93% di riempimento"
            />
            
            <x-stats-card 
                title="Lezioni Totali"
                :value="32"
                icon="calendar"
                color="purple"
                subtitle="2 lezioni/settimana"
            />
            
            <x-stats-card 
                title="Ricavo Totale"
                :value="'€2,380'"
                icon="currency-dollar"
                color="green"
                subtitle="€85 per studente"
            />
            
            <x-stats-card 
                title="Presenza Media"
                :value="'94%'"
                icon="check-circle"
                color="rose"
                subtitle="Ottima partecipazione"
            />
        </div>

        <!-- Content Tabs -->
        <div x-data="{ activeTab: 'overview' }" class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20">
            <!-- Tab Navigation -->
            <div class="border-b border-gray-200">
                <nav class="-mb-px flex space-x-8 px-6">
                    <button @click="activeTab = 'overview'" 
                            :class="{ 'border-rose-500 text-rose-600': activeTab === 'overview', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'overview' }"
                            class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Panoramica
                    </button>
                    <button @click="activeTab = 'students'" 
                            :class="{ 'border-rose-500 text-rose-600': activeTab === 'students', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'students' }"
                            class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Studenti (28)
                    </button>
                    <button @click="activeTab = 'schedule'" 
                            :class="{ 'border-rose-500 text-rose-600': activeTab === 'schedule', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'schedule' }"
                            class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Orario
                    </button>
                    <button @click="activeTab = 'attendance'" 
                            :class="{ 'border-rose-500 text-rose-600': activeTab === 'attendance', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'attendance' }"
                            class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Presenze
                    </button>
                    <button @click="activeTab = 'materials'" 
                            :class="{ 'border-rose-500 text-rose-600': activeTab === 'materials', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'materials' }"
                            class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Materiali
                    </button>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="p-6">
                <!-- Overview Tab -->
                <div x-show="activeTab === 'overview'" class="space-y-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Course Details -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-900">Dettagli Corso</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Livello:</span>
                                    <span class="font-medium text-gray-900">Intermedio</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Durata:</span>
                                    <span class="font-medium text-gray-900">8 mesi (32 lezioni)</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Frequenza:</span>
                                    <span class="font-medium text-gray-900">2 lezioni/settimana</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Durata lezione:</span>
                                    <span class="font-medium text-gray-900">90 minuti</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Sala:</span>
                                    <span class="font-medium text-gray-900">Sala A - Piano Terra</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Costo mensile:</span>
                                    <span class="font-medium text-green-600">€85,00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">Età consigliata:</span>
                                    <span class="font-medium text-gray-900">12-16 anni</span>
                                </div>
                            </div>
                        </div>

                        <!-- Instructor Info -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-900">Istruttore</h3>
                            <div class="bg-gradient-to-r from-rose-50 to-purple-50 rounded-lg p-4 border border-rose-200">
                                <div class="flex items-center space-x-4">
                                    <div class="w-16 h-16 bg-gradient-to-r from-rose-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-xl">
                                        MR
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-semibold text-gray-900">Prof.ssa Martina Rossi</h4>
                                        <p class="text-sm text-gray-600">Diplomata Accademia Teatro alla Scala</p>
                                        <p class="text-sm text-gray-600">15 anni di esperienza</p>
                                        <div class="flex items-center mt-2">
                                            @for ($i = 1; $i <= 5; $i++)
                                                <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                                </svg>
                                            @endfor
                                            <span class="text-sm text-gray-600 ml-2">(4.9/5 - 124 recensioni)</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 flex space-x-3">
                                    <button class="flex-1 px-4 py-2 bg-white text-rose-600 border border-rose-600 rounded-lg hover:bg-rose-50 text-sm font-medium">
                                        Contatta
                                    </button>
                                    <button class="flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 text-sm font-medium">
                                        Profilo Completo
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Course Description -->
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Descrizione Corso</h3>
                        <div class="prose prose-gray max-w-none">
                            <p class="text-gray-700">
                                Il corso di Danza Classica Intermedio è rivolto a studenti che hanno già acquisito le basi della danza classica 
                                e desiderano perfezionare la tecnica e l'espressività. Durante le lezioni verranno approfonditi i movimenti fondamentali, 
                                la postura, l'equilibrio e la coordinazione.
                            </p>
                            <p class="text-gray-700 mt-3">
                                Il programma include esercizi alla sbarra, al centro, salti e variazioni coreografiche. Gli studenti impareranno 
                                anche i principi dell'interpretazione artistica e della musicalità, elementi essenziali per una formazione completa.
                            </p>
                        </div>
                    </div>

                    <!-- Prerequisites & Requirements -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-3">Prerequisiti</h4>
                            <ul class="space-y-2 text-sm text-gray-600">
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                    </svg>
                                    Conoscenza delle 5 posizioni di base
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                    </svg>
                                    Esercizi base alla sbarra
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                    </svg>
                                    Almeno 1 anno di esperienza
                                </li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-900 mb-3">Occorrente</h4>
                            <ul class="space-y-2 text-sm text-gray-600">
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 text-rose-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                    Body nero o colori scuri
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 text-rose-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                    Collant rosa o neri
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 text-rose-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                    Scarpette da danza classica
                                </li>
                                <li class="flex items-center">
                                    <svg class="w-4 h-4 text-rose-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                    </svg>
                                    Capelli raccolti
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Students Tab -->
                <div x-show="activeTab === 'students'" class="space-y-4">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-gray-900">Studenti Iscritti (28/30)</h3>
                        <div class="flex space-x-3">
                            <button @click="$dispatch('open-modal', 'add-student')" 
                                    class="px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 text-sm font-medium">
                                <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                                Aggiungi Studente
                            </button>
                            <button class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium">
                                Esporta Lista
                            </button>
                        </div>
                    </div>

                    <!-- Students Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        @php
                            $students = [
                                ['name' => 'Sofia Verdi', 'age' => 14, 'enrolled' => '2024-09-01', 'attendance' => 95],
                                ['name' => 'Marco Neri', 'age' => 13, 'enrolled' => '2024-09-01', 'attendance' => 88],
                                ['name' => 'Giulia Rossi', 'age' => 15, 'enrolled' => '2024-09-05', 'attendance' => 92],
                                ['name' => 'Luca Bianchi', 'age' => 16, 'enrolled' => '2024-09-10', 'attendance' => 85],
                                ['name' => 'Emma Ferrari', 'age' => 14, 'enrolled' => '2024-09-01', 'attendance' => 100],
                                ['name' => 'Alessandro Romano', 'age' => 15, 'enrolled' => '2024-09-03', 'attendance' => 90]
                            ];
                        @endphp
                        @foreach ($students as $student)
                            <div class="bg-white p-4 rounded-lg border border-gray-200 hover:border-rose-300 transition-colors">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="w-10 h-10 bg-gradient-to-r from-rose-400 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                                        {{ strtoupper(substr($student['name'], 0, 1) . substr(explode(' ', $student['name'])[1], 0, 1)) }}
                                    </div>
                                    <div class="flex-1">
                                        <h4 class="font-medium text-gray-900">{{ $student['name'] }}</h4>
                                        <p class="text-sm text-gray-500">{{ $student['age'] }} anni</p>
                                    </div>
                                </div>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Iscritto:</span>
                                        <span class="text-gray-900">{{ date('d/m/Y', strtotime($student['enrolled'])) }}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Presenze:</span>
                                        <span class="font-medium {{ $student['attendance'] >= 90 ? 'text-green-600' : 'text-yellow-600' }}">
                                            {{ $student['attendance'] }}%
                                        </span>
                                    </div>
                                </div>
                                <div class="mt-3 flex space-x-2">
                                    <button class="flex-1 px-3 py-1 bg-rose-50 text-rose-600 rounded text-xs font-medium hover:bg-rose-100">
                                        Dettagli
                                    </button>
                                    <button class="flex-1 px-3 py-1 bg-gray-50 text-gray-600 rounded text-xs font-medium hover:bg-gray-100">
                                        Contatti
                                    </button>
                                </div>
                            </div>
                        @endforeach
                    </div>
                </div>

                <!-- Other tabs would be implemented similarly -->
                <div x-show="activeTab === 'schedule'" class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-900">Orario delle Lezioni</h3>
                    <div class="bg-gradient-to-r from-rose-50 to-purple-50 p-6 rounded-lg border border-rose-200">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-rose-500 rounded-lg flex items-center justify-center text-white">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">Martedì</h4>
                                    <p class="text-gray-600">16:00 - 17:30</p>
                                    <p class="text-sm text-gray-500">Sala A</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center text-white">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-900">Giovedì</h4>
                                    <p class="text-gray-600">16:00 - 17:30</p>
                                    <p class="text-sm text-gray-500">Sala A</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div x-show="activeTab === 'attendance'" class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-900">Registro Presenze</h3>
                    <p class="text-gray-600">Sistema di gestione delle presenze e assenze degli studenti...</p>
                </div>

                <div x-show="activeTab === 'materials'" class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-900">Materiali Didattici</h3>
                    <p class="text-gray-600">Video, musiche, documenti e risorse per il corso...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <x-modal name="duplicate-course" maxWidth="md">
        <div class="p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Duplica Corso</h3>
            <p class="text-gray-600 mb-6">
                Stai per creare una copia di "Danza Classica Intermedio". 
                Vuoi modificare alcuni dettagli?
            </p>
            <form>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nuovo Nome Corso</label>
                        <input type="text" value="Danza Classica Intermedio (Copia)" 
                               class="w-full border-gray-300 rounded-lg focus:ring-rose-500 focus:border-rose-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Data Inizio</label>
                        <input type="date" value="2024-10-01" 
                               class="w-full border-gray-300 rounded-lg focus:ring-rose-500 focus:border-rose-500">
                    </div>
                </div>
                <div class="flex items-center justify-end space-x-3 mt-6">
                    <button type="button" @click="$dispatch('close-modal', 'duplicate-course')" 
                            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200">
                        Annulla
                    </button>
                    <button type="submit" 
                            class="px-4 py-2 text-sm font-medium text-white bg-rose-600 rounded-lg hover:bg-rose-700">
                        Duplica Corso
                    </button>
                </div>
            </form>
        </div>
    </x-modal>
